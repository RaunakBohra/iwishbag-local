{
  "info": {
    "name": "iwishBag API Collection",
    "description": "Complete API collection for iwishBag platform integration",
    "version": "1.1.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{apiKey}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://iwishbag.com/api/v1",
      "type": "string"
    },
    {
      "key": "apiKey",
      "value": "YOUR_API_KEY_HERE",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Quotes",
      "item": [
        {
          "name": "List Quotes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/quotes?limit=10&offset=0",
              "host": ["{{baseUrl}}"],
              "path": ["quotes"],
              "query": [
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of quotes to return (max 100)"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Number of quotes to skip"
                },
                {
                  "key": "status",
                  "value": "pending",
                  "disabled": true,
                  "description": "Filter by status (pending, approved, etc.)"
                }
              ]
            },
            "description": "Retrieve a paginated list of quotes with optional filtering"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/quotes?limit=10",
                  "host": ["{{baseUrl}}"],
                  "path": ["quotes"],
                  "query": [
                    {
                      "key": "limit",
                      "value": "10"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"data\": [\n    {\n      \"id\": \"quote_123\",\n      \"quote_number\": \"IWB-2025-001\",\n      \"status\": \"pending\",\n      \"total_amount\": 150.50,\n      \"currency\": \"USD\",\n      \"created_at\": \"2025-01-28T10:00:00Z\"\n    }\n  ],\n  \"total\": 25,\n  \"hasMore\": true,\n  \"version\": \"v1.1\"\n}"
            }
          ]
        },
        {
          "name": "Create Quote",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\n      \"name\": \"Wireless Bluetooth Headphones\",\n      \"price_usd\": 99.99,\n      \"quantity\": 1,\n      \"weight\": 0.5,\n      \"url\": \"https://example.com/product/headphones\",\n      \"description\": \"Premium wireless headphones with noise cancellation\"\n    }\n  ],\n  \"shipping_country\": \"NP\",\n  \"customer_data\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"phone\": \"+977-9841234567\",\n    \"address\": {\n      \"street\": \"123 Main St\",\n      \"city\": \"Kathmandu\",\n      \"state\": \"Bagmati\",\n      \"postal_code\": \"44600\",\n      \"country\": \"NP\"\n    }\n  },\n  \"special_instructions\": \"Handle with care - fragile electronics\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/quotes",
              "host": ["{{baseUrl}}"],
              "path": ["quotes"]
            },
            "description": "Create a new quote request for international shopping"
          },
          "response": [
            {
              "name": "Quote Created",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"items\": [\n    {\n      \"name\": \"Wireless Headphones\",\n      \"price_usd\": 99.99,\n      \"quantity\": 1,\n      \"weight\": 0.5\n    }\n  ],\n  \"shipping_country\": \"NP\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/quotes",
                  "host": ["{{baseUrl}}"],
                  "path": ["quotes"]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"quote_456\",\n  \"quote_number\": \"IWB-2025-002\",\n  \"status\": \"pending\",\n  \"estimated_total\": 125.50,\n  \"message\": \"Quote created successfully. You will receive an email when it's ready.\"\n}"
            }
          ]
        },
        {
          "name": "Get Quote Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/quotes/{{quoteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["quotes", "{{quoteId}}"]
            },
            "description": "Retrieve detailed information about a specific quote"
          },
          "response": []
        },
        {
          "name": "Update Quote Status (Admin)",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"approved\",\n  \"notes\": \"Quote approved for processing. Customer notified via email.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/quotes/{{quoteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["quotes", "{{quoteId}}"]
            },
            "description": "Update the status of a quote (admin only)"
          },
          "response": []
        }
      ],
      "description": "Quote management endpoints for creating and tracking quote requests"
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "List Orders",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders?limit=20&status=shipped",
              "host": ["{{baseUrl}}"],
              "path": ["orders"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "shipped",
                  "disabled": true
                }
              ]
            },
            "description": "Retrieve user's order history with optional filtering"
          },
          "response": [
            {
              "name": "Orders List",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/orders",
                  "host": ["{{baseUrl}}"],
                  "path": ["orders"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"data\": [\n    {\n      \"id\": \"order_789\",\n      \"quote_id\": \"quote_123\",\n      \"order_number\": \"ORD-2025-001\",\n      \"status\": \"shipped\",\n      \"tracking_id\": \"IWB20251001\",\n      \"total_amount\": 150.50,\n      \"currency\": \"USD\",\n      \"created_at\": \"2025-01-20T12:00:00Z\",\n      \"updated_at\": \"2025-01-25T14:30:00Z\"\n    }\n  ],\n  \"total\": 5\n}"
            }
          ]
        },
        {
          "name": "Get Order Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/orders/{{orderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["orders", "{{orderId}}"]
            },
            "description": "Retrieve detailed information about a specific order"
          },
          "response": []
        }
      ],
      "description": "Order processing and management endpoints"
    },
    {
      "name": "Tracking",
      "item": [
        {
          "name": "Track Order",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tracking/IWB20251001",
              "host": ["{{baseUrl}}"],
              "path": ["tracking", "IWB20251001"]
            },
            "description": "Get tracking information for an order using tracking ID"
          },
          "response": [
            {
              "name": "Tracking Info",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/tracking/IWB20251001",
                  "host": ["{{baseUrl}}"],
                  "path": ["tracking", "IWB20251001"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"tracking_id\": \"IWB20251001\",\n  \"status\": \"in_transit\",\n  \"estimated_delivery\": \"2025-02-05\",\n  \"updates\": [\n    {\n      \"status\": \"shipped\",\n      \"location\": \"Warehouse - USA\",\n      \"timestamp\": \"2025-01-25T14:30:00Z\",\n      \"description\": \"Package shipped from warehouse\"\n    },\n    {\n      \"status\": \"in_transit\",\n      \"location\": \"Transit Hub - India\",\n      \"timestamp\": \"2025-01-27T08:15:00Z\",\n      \"description\": \"Package in transit to destination country\"\n    }\n  ]\n}"
            }
          ]
        }
      ],
      "description": "Order tracking endpoints for real-time shipment status"
    },
    {
      "name": "Customers (Admin Only)",
      "item": [
        {
          "name": "List Customers",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/customers?search=john&limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["customers"],
              "query": [
                {
                  "key": "search",
                  "value": "john",
                  "disabled": true,
                  "description": "Search by name, email, or phone"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            },
            "description": "Retrieve customer list with search and filtering (admin only)"
          },
          "response": [
            {
              "name": "Customers List",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/customers",
                  "host": ["{{baseUrl}}"],
                  "path": ["customers"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"data\": [\n    {\n      \"id\": \"customer_321\",\n      \"full_name\": \"Jane Smith\",\n      \"email\": \"jane@example.com\",\n      \"phone\": \"+977-9841234567\",\n      \"created_at\": \"2025-01-15T08:30:00Z\",\n      \"total_orders\": 3,\n      \"total_spent\": 450.75\n    }\n  ],\n  \"total\": 150\n}"
            }
          ]
        }
      ],
      "description": "Customer management endpoints (admin access required)"
    },
    {
      "name": "Calculator",
      "item": [
        {
          "name": "Basic Cost Estimate",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\n      \"name\": \"iPhone 15\",\n      \"price_usd\": 999.99,\n      \"quantity\": 1,\n      \"weight\": 0.2,\n      \"category\": \"electronics\",\n      \"hsn_code\": \"8517\"\n    }\n  ],\n  \"shipping_country\": \"NP\",\n  \"include_taxes\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/calculator/estimate",
              "host": ["{{baseUrl}}"],
              "path": ["calculator", "estimate"]
            },
            "description": "Calculate basic shipping costs and taxes for items"
          },
          "response": [
            {
              "name": "Calculation Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"items\": [\n    {\n      \"name\": \"iPhone 15\",\n      \"price_usd\": 999.99,\n      \"quantity\": 1,\n      \"weight\": 0.2\n    }\n  ],\n  \"shipping_country\": \"NP\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/calculator/estimate",
                  "host": ["{{baseUrl}}"],
                  "path": ["calculator", "estimate"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"calculation_id\": \"calc_abc123\",\n  \"total_estimate\": 1245.50,\n  \"breakdown\": {\n    \"item_cost\": 999.99,\n    \"shipping_fee\": 85.00,\n    \"customs_duty\": 140.00,\n    \"tax_amount\": 20.51,\n    \"service_fee\": 0.00\n  },\n  \"currency\": \"USD\",\n  \"expires_at\": \"2025-01-28T11:00:00Z\"\n}"
            }
          ]
        },
        {
          "name": "Detailed Calculation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\n      \"name\": \"MacBook Pro\",\n      \"price_usd\": 2499.99,\n      \"quantity\": 1,\n      \"weight\": 2.0,\n      \"dimensions\": {\n        \"length\": 35,\n        \"width\": 25,\n        \"height\": 2\n      },\n      \"category\": \"electronics\",\n      \"hsn_code\": \"8471\",\n      \"url\": \"https://apple.com/macbook-pro\"\n    }\n  ],\n  \"shipping_country\": \"IN\",\n  \"customer_tier\": \"premium\",\n  \"currency\": \"INR\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/calculator/detailed",
              "host": ["{{baseUrl}}"],
              "path": ["calculator", "detailed"]
            },
            "description": "Get detailed calculation breakdown with all fees and recommendations"
          },
          "response": []
        },
        {
          "name": "Get Shipping Rates",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/calculator/rates?to_country=NP&category=electronics",
              "host": ["{{baseUrl}}"],
              "path": ["calculator", "rates"],
              "query": [
                {
                  "key": "to_country",
                  "value": "NP",
                  "description": "Destination country code"
                },
                {
                  "key": "category",
                  "value": "electronics",
                  "disabled": true,
                  "description": "Product category for specific rates"
                }
              ]
            },
            "description": "Get current shipping rates and tax information for a country"
          },
          "response": [
            {
              "name": "Rates Information",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/calculator/rates?to_country=NP",
                  "host": ["{{baseUrl}}"],
                  "path": ["calculator", "rates"],
                  "query": [
                    {
                      "key": "to_country",
                      "value": "NP"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"shipping_rates\": {\n    \"air\": { \"base_rate\": 25.00, \"per_kg\": 15.00, \"min_charge\": 50.00 },\n    \"sea\": { \"base_rate\": 15.00, \"per_kg\": 8.00, \"min_charge\": 30.00 },\n    \"express\": { \"base_rate\": 45.00, \"per_kg\": 25.00, \"min_charge\": 80.00 }\n  },\n  \"tax_rates\": {\n    \"customs_duty\": { \"min\": 10, \"max\": 30, \"typical\": 20 },\n    \"gst\": 18,\n    \"additional_cess\": 0\n  },\n  \"available_routes\": [\n    { \"id\": \"air_express\", \"name\": \"Air Express\", \"delivery_days\": \"3-5\" },\n    { \"id\": \"air_standard\", \"name\": \"Air Standard\", \"delivery_days\": \"7-10\" },\n    { \"id\": \"sea_freight\", \"name\": \"Sea Freight\", \"delivery_days\": \"21-30\" }\n  ],\n  \"currency\": \"USD\",\n  \"last_updated\": \"2025-01-28T09:00:00Z\"\n}"
            }
          ]
        },
        {
          "name": "Bulk Calculation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"calculations\": [\n    {\n      \"id\": \"calc_1\",\n      \"items\": [\n        {\n          \"name\": \"Smartphone\",\n          \"price_usd\": 800,\n          \"quantity\": 1,\n          \"weight\": 0.2\n        }\n      ],\n      \"shipping_country\": \"NP\"\n    },\n    {\n      \"id\": \"calc_2\",\n      \"items\": [\n        {\n          \"name\": \"Laptop\",\n          \"price_usd\": 1500,\n          \"quantity\": 1,\n          \"weight\": 2.5\n        }\n      ],\n      \"shipping_country\": \"IN\"\n    }\n  ],\n  \"save_results\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/calculator/bulk",
              "host": ["{{baseUrl}}"],
              "path": ["calculator", "bulk"]
            },
            "description": "Calculate costs for multiple item sets simultaneously"
          },
          "response": []
        },
        {
          "name": "HSN Code Lookup",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/calculator/hsn-lookup?product_name=smartphone&country=IN",
              "host": ["{{baseUrl}}"],
              "path": ["calculator", "hsn-lookup"],
              "query": [
                {
                  "key": "product_name",
                  "value": "smartphone",
                  "description": "Product name for HSN suggestion"
                },
                {
                  "key": "country",
                  "value": "IN",
                  "description": "Destination country for tax rates"
                }
              ]
            },
            "description": "Look up HSN codes and tax rates for products"
          },
          "response": [
            {
              "name": "HSN Suggestions",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/calculator/hsn-lookup?product_name=smartphone",
                  "host": ["{{baseUrl}}"],
                  "path": ["calculator", "hsn-lookup"],
                  "query": [
                    {
                      "key": "product_name",
                      "value": "smartphone"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"suggestions\": [\n    {\n      \"hsn_code\": \"8517\",\n      \"description\": \"Telephone sets, including smartphones\",\n      \"confidence\": 0.95,\n      \"tax_rates\": {\n        \"customs_duty\": 20,\n        \"gst\": 18,\n        \"additional_cess\": 0\n      }\n    }\n  ],\n  \"tax_info\": {\n    \"effective_rate\": 41.6,\n    \"breakdown\": \"Customs Duty (20%) + GST (18%) on (Cost + Duty)\"\n  }\n}"
            }
          ]
        }
      ],
      "description": "Quote calculation and cost estimation APIs"
    },
    {
      "name": "Webhooks",
      "item": [
        {
          "name": "Quote Status Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"quote_id\": \"quote_123\",\n  \"status\": \"approved\",\n  \"timestamp\": \"2025-01-28T10:30:00Z\",\n  \"data\": {\n    \"approved_by\": \"admin_user\",\n    \"notes\": \"Quote approved for processing\",\n    \"total_amount\": 150.50\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/webhooks/quote-status",
              "host": ["{{baseUrl}}"],
              "path": ["webhooks", "quote-status"]
            },
            "description": "Webhook endpoint for receiving quote status updates"
          },
          "response": [
            {
              "name": "Webhook Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"quote_id\": \"quote_123\",\n  \"status\": \"approved\",\n  \"timestamp\": \"2025-01-28T10:30:00Z\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/webhooks/quote-status",
                  "host": ["{{baseUrl}}"],
                  "path": ["webhooks", "quote-status"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true\n}"
            }
          ]
        }
      ],
      "description": "Webhook endpoints for real-time event notifications"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set dynamic variables if needed",
          "if (!pm.collectionVariables.get('quoteId')) {",
          "    pm.collectionVariables.set('quoteId', 'quote_123');",
          "}",
          "if (!pm.collectionVariables.get('orderId')) {",
          "    pm.collectionVariables.set('orderId', 'order_789');",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Common test assertions",
          "pm.test('Status code is successful', function () {",
          "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 202]);",
          "});",
          "",
          "pm.test('Response time is acceptable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has correct content type', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});"
        ]
      }
    }
  ]
}